<% provide(:title, "Edit user") %>
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for [@user] do |f| %>
      <%= render "shared/error_messages", object: @user %>

      <%= f.label :first_name %>
      <%= f.text_field :first_name %>

      <%= f.label :last_name %>
      <%= f.text_field :last_name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :address %>
      <%= f.text_field :address %>

      <div id= "div_btn_change_password">
        <%= f.label :current_password, class: "display-inline" %> 
        <%= link_to "(Change password)", "#", id: "btn_change_password", class: "display-inline"%>
      </div>
      <div id= "div_btn_cancel_change_password">
        <%= f.label :current_password, class: "display-inline" %> 
        <%= link_to "(Cancel change password)", "#", id: "btn_cancel_change_password", class: "display-inline"%>
      </div>
      <%= f.password_field :current_password %>
      <div id="change_password">
        <%= f.label :password, "New password" %>
        <%= f.password_field :password %>

        <%= f.label :password_confirmation, "New password confirm" %>
        <%= f.password_field :password_confirmation %>
      </div>

      
      <%= f.submit "Save changes", class: "btn btn-primary" %>
    <% end %>

    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails">change avata</a>
  </div>
</div>
<script type="text/javascript">
  $("#change_password").hide();
  $("#div_btn_cancel_change_password").hide();
  $(document).ready(function(){
    $("#btn_change_password").on("click", function(event) {
      event.preventDefault();
      $("#div_btn_change_password").hide();
      $("#change_password").show();
      $("#div_btn_cancel_change_password").show();
    });
    $("#btn_cancel_change_password").on("click", function(event) {
      event.preventDefault();
      $("#div_btn_cancel_change_password").hide();
      $("#user_password").val("");
      $("#user_password_confirmation").val("");
      $("#change_password").hide();
      $("#div_btn_change_password").show();
    });
  });
</script>